"use strict";jQuery(document).ready(function(c){if(!wp.oldEditor){window.wp.oldEditor=wp.editor}c(".row-tik").closest(".inside").addClass("inside-tik");function i(k){if(typeof c.fn.select2==="function"){k.find(".select2-container").remove();b(k.find(".select2-tik"));f(k.find(".select2_ajax-tik"))}if(typeof c.fn.datepicker==="function"){k.find(".datepicker-input-tik").datepicker({dateFormat:"yy-mm-dd",showAnim:"slideDown"})}if(typeof c.fn.wpColorPicker==="function"){d(k.find(".colorpicker-input-tik"))}if(typeof c.fn.placepicker==="function"){j(k.find(".placepicker_fields_tik"))}if(typeof c.fn.sortable==="function"){k.find(".repeater-tik .repeater-tik-list").sortable({stop:function(){c(this).trigger("repeater-drop-fields-tik")}})}if(typeof wp.oldEditor==="object"){a(k.find(".row-tik .wp-editor-wrap"))}h(k)}i(c("body"));function g(k,l,n){var m=new Date();m.setTime(m.getTime()+(n*24*60*60*1000));document.cookie=k+"="+l+";expires="+m.toUTCString()+";path=/"}function e(k){var l="; "+document.cookie;var m=l.split("; "+k+"=");if(m.length===2){return m.pop().split(";").shift()}}function b(k){k.each(function(){c(this).select2({allowClear:c(this).attr("data-allow-null"),placeholder:""})})}function f(k){k.each(function(){var o=c(this);var n;var m=o.closest(".select2_ajax_wrapper-tik").find("template").html();try{n=JSON.parse(m)}catch(p){console.warn(p);return}if(n.values&&n.values.length){c.ajax({url:fieldsTik.ajaxUrl,method:"POST",dataType:"json",data:{action:"get_data_query_fields_tik",query:n.query,ids:n.values,_:n._}}).done(function(q){l(q);o.val(n.values[0]).change()}).fail(function(q){console.warn(q)})}else{l(null)}function l(q){o.select2({data:q,allowClear:c(this).attr("data-allow-null"),placeholder:"",escapeMarkup:function(r){return r},templateResult:function(r){return r.text},templateSelection:function(r){return r.text},ajax:{url:fieldsTik.ajaxUrl,method:"POST",dataType:"json",data:function(r){return{action:"get_data_query_fields_tik",query:n.query,s:r.term,page:r.page||1,_:n._}},processResults:function(r){return{results:r,pagination:{more:r.length===20}}}}})}})}function j(k){k.each(function(l){var m=c(this).closest(".location-tik");m.attr("data-key",l);m.find(".placepicker-map_fields_tik").html("");c(this).data("placepicker",null);c(this).placepicker({longitudeInput:m.find(".longitude"),latitudeInput:m.find(".latitude"),placeChanged:function(n){c('.location-tik[data-key="'+l+'"]').trigger("location-change",this,n)}})})}function d(k){k.each(function(){var m=c(this).closest(".input-wrapper");var n=m.find(".colorpicker-input-tik");m.html(n);c(this).wpColorPicker({change:function(p,q){var o=q.color.toString();m.find(".color-input-tik").val(o);m.find(".color-input-tik").css({background:"linear-gradient(to right, white 0, white 40%, "+o+" 90%)"})}});m.find(".wp-picker-container").append('<input class="color-input-tik" />');var l=m.find(".colorpicker-input-tik").val();m.find(".color-input-tik").val(l);if(l){m.find(".color-input-tik").css({background:"linear-gradient(to right, white 0, white 40%, "+l+" 90%)"})}})}function a(k){k.each(function(){var l=c(this).closest(".repeater-tik-item").index();if(l===0){return true}var m=c(this).closest(".input-wrapper");var p=c(this).find(".wp-editor-area");var o=p.attr("id");var n=o.replace(/_\d+$/,"_"+l);p.attr("id",n);c(this).replaceWith(p);wp.oldEditor.initialize(n,{tinymce:tinyMCEPreInit.mceInit[o],quicktags:tinyMCEPreInit.qtInit[o],mediaButtons:true});m.find(".mce-container").show();c("#"+n+"_ifr").css({height:200})})}function h(k){k.find(".link-title").each(function(){var l=c(this).closest(".input-wrapper").find(".link-input-text").val();c(this).html(l)});k.find(".link-url").each(function(){var l=c(this).closest(".input-wrapper").find(".link-input-url").val();c(this).attr("href",l).html(l)})}c(function(){c(document).on("change",".color-input-tik",function(){var k=c(this).val();c(this).closest(".wp-picker-container").find(".colorpicker-input-tik").val(k).change()});c(document).on("focus",".color-input-tik",function(){c(this).closest(".wp-picker-container").find(".wp-color-result").click()})});c(function(){c(document).on("location-change",".location-tik",function(m,l){var n=c(this);var k=l.getLocation();n.find(".longitude").val(k.longitude).trigger("change");n.find(".latitude").val(k.latitude).trigger("change")});c(document).on("click",".toggle_placepicker_fields_tik",function(k){k.preventDefault();var l=c(this).closest(".location-tik");l.find(".placepicker-map-wrapper").slideToggle(400,function(){})})});c(function(){c(document).on("click",".repeater-tik-new-item",function(){var o=c(this).closest(".repeater-tik");var m=o.children(".repeater-tik-list");var n=m.children(".repeater-tik-item").get(0).outerHTML;m.append(n);var l=m.children(".repeater-tik-item").last();l.find(":input").val("");l.find(".attachment-wrapper img").attr("src",fieldsTik.mimeTypeIcon);l.find(".attachment-wrapper .text").html("");l.hide().slideDown();k(o);i(l)});c(document).on("click",".repeater-tik-delete-item",function(){var m=c(this).closest(".repeater-tik");var l=c(this).closest(".repeater-tik-item");l.slideUp(null,function(){l.remove();k(m)})});c(".repeater-tik-list").on("repeater-drop-fields-tik",k);function k(n){n=n.target?c(n.target):n;var m=0;var l=n.hasClass("repeater-tik-list")?n.children(".repeater-tik-item"):n.children(".repeater-tik-list").children(".repeater-tik-item");l.each(function(){c(this).attr("data-key",m);var o=c(this).parents(".repeater-tik-item").length;var q="^(fields_tik\\[[^\\]]+\\]";for(var p=0;p<o;p++){q+="\\[\\d+]\\[[^\\]]+\\]"}q+="\\[)(\\d+)";var r=new RegExp(q);c(this).find("[name]").each(function(){var s=c(this).attr("name").replace(r,"$1"+m);c(this).attr("name",s)});c(this).find("sup").text((m+1)+".");m++})}});c(function(){c(document).on("click",".add-file-field-tik",function(){var l=c(this);var k=wp.media({library:{type:l.attr("data-type")},button:{text:fieldsTik.i18n.Select},multiple:true}).on("select",function(){var n=k.state().get("selection");var m=l.closest(".repeater-tik-item").attr("data-key");var o=l.closest(".repeater-tik");var p=true;n.map(function(t){t=t.toJSON();var q;if(p){p=false;q=l}else{o.find(".repeater-tik-new-item").click();q=o.find('.repeater-tik-item[data-key="'+m+'"] .add-file-field-tik')}m++;q.find("input").val(t.id).change();if("sizes" in t){var s;try{s=t.sizes.thumbnail.url}catch(r){s=t.url}q.find("img").attr("src",s)}else{q.find("img").attr("src",t.icon)}q.find(".text").html(t.filename)})}).open()});c(document).on("click",".delete-file-tik",function(k){k.preventDefault();k.stopPropagation();var l=c(this).closest(".input-wrapper");l.find(".file-input").val("");l.find(".text").html("");l.find("img").replaceWith('<img src="'+fieldsTik.siteUrl+'/wp-includes/images/media/default.png" alt=""/>')})});c(function(){c(document).on("click",".nav-tab-wrapper-tik a",function(m){m.preventDefault();var l=c(this).attr("href");var o=c(l);if(!o.is(":visible")){var n=c(this).closest(".nav-tab-wrapper-tik");n.find(".nav-tab").removeClass("nav-tab-active");c(this).addClass("nav-tab-active");n.siblings().hide();o.show();g("active-tab-fields-tik",l,1)}});var k=e("active-tab-fields-tik");if(k){c('a[href="'+k+'"]').trigger("click")}});c(function(){c("#wp-link-textarea-tik-wrap").hide().appendTo("body");var k=null;c(document).on("click",".link-tik .link-btn-tik",function(l){l.preventDefault();k=c(this).closest(".link-tik");wpLink.open("link-textarea-tik");setTimeout(function(){c("#wp-link-url").val(k.find(".link-url").attr("href"));c("#wp-link-text").val(k.find(".link-title").html());c("#wp-link-target").prop("checked","_blank"===k.find(".link-input-target").val())},100);return false});c(document).on("click","#wp-link-submit",function(m){m.preventDefault();m.stopPropagation();var l=wpLink.getAttrs();var n=c("#wp-link-text").val();k.find(".link-url").attr("href",l.href).html(l.href);k.find(".link-title").html(n);k.find(".link-input-url").val(l.href).change();k.find(".link-input-text").val(n);k.find(".link-input-target").val(l.target);wpLink.textarea=c("body");wpLink.close();c("#link-textarea-tik").val("");return false});c(document).on("click","#wp-link-cancel, #wp-link-close",function(l){l.preventDefault();l.stopPropagation();wpLink.textarea=c("body");wpLink.close();return false})})});